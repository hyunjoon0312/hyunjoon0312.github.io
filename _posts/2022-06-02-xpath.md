---
title:  "[웹스크랩핑 #1] XPath란 무엇인가?"
excerpt: "웹 스크랭핑을 위해 반드시 알아야하는 XPath에 대한 설명"
toc: true
toc_sticky: true
toc_label: "목차"

categories:
  - Programming
tags:
  - Web
---

<p>&nbsp;</p>



이번 포스팅에서는 웹 스크랩핑을 접하기 전 반드시 알아야 할 내용인 XPath에 대해서 이야기해보려고 합니다. BeautifulSoup을 사용하던, Selenium을 사용하던 웹 페이지에서 내가 원하는 부분만 쏙쏙 뽑아서 가져오고 싶다면 내가 원하는 부분이 정확히 어떤 것인지 지정할 수 있어야 할 것 입니다. 이때 필요한 것이 바로 내가 가져오고 싶은 컨텐츠의 XPath 입니다.  

-----

<p>&nbsp;</p>


# HTML이란 무엇인가?

Xpath에 대해 이야기하기 위해서는 HTML을 알아야 하기 때문에 잠시 HTML에 대해서 이야기하고 넘어가겠습니다.   

```markup
<!DCOTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>mr-devlife blog</title>
    </head>
    <body>
        <p>Mr.DevLife의 Blog</p>
        <input type="text" value="ID">
        <input type="password">
        <input type="button" value="Login"
    </body>
</html>
```

이와 같은 형태를 가지고 있는 언어로 HTML은 Hyper Text Markup Language의 약자 입니다. 웹사이트를 만드는 가장 기초가 되는 언어로 이 세상에 존재하는 모든 웹페이지들이 HTML로 만들어져 있습니다. HTML은 이러한 웹 페이지에서 어떤 정보나 요소를 배치하기 위해 특정 구역을 설정하는데 이용됩니다. 우리가 접하는 다양한 웹 페이지들은 HTML 외에도 웹 페이지의 인테리어와 디자인을 담당해주는 CSS와 다양한 기능과 효과를 추가해주는 JavaScript 등의 다양한 기술이 추가로 적용되어야만 합니다.   

-----

<p>&nbsp;</p>


# HTML의 요소

![HTML Element](https://drive.google.com/uc?export=view&id=1CQSa_zoYYgvHtluWB1qSDhP-nTpjr1KQ)

HTML은 요소(Element)라는 것으로 이루어져 있는데 위의 \<head>나 \<title> 그리고 \<body>와 같은 것들이 요소 입니다. 이 요소는 웹 페이지를 구성하는 역할을 하며 각각의 요소는 제목을 표시 한다거나 내용을 나타내는 등 요소에 따라 특정한 방식으로 동작하게 되어있습니다. 이 요소는 태그(Tag)로 특징을 나타내며 head, title, body 같은 것이 태그 입니다.  

그리고 요소는 태그와 더불어 속성(Attribute)도 가지고 있는데 \<meta> 요소에서 meta가 태그, charset이 속성이 됩니다. 속성은 태그에 특정 속성을 변경하거나 추가해주는 기능을 합니다. meta 태그의 charset 속성은 속성 값인 utf-8로 문자 인코딩을 변경해 주는 기능을 합니다.   


위의 예시 코드에 있는 html이나 head, body, meta와 같은 태그 외에도 제목을 나타내는 h1~h6 태그, 하이퍼링크를 나타내는 a 태그, 이미지를 나타내는 img 태그 등 다양한 태그가 있습니다.  

-----

<p>&nbsp;</p>


# XPath란 무엇인가?

![xpath](https://drive.google.com/uc?export=view&id=11pGt2hpeGbYPWsVaZWC-msYeGdbCPiR-)

XPath를 이야기하기에 앞서 HTML에 대해 반드시 이야기하고 넘어왔어야 하는 이유는 바로 그림과 같이 HTML은 계층 구조로 이루어져 있다는 것을 알아야 하기 때문입니다. HTML은 요소와 속성으로 이루어져 있다고 말씀드렸고 바로 이 요소와 요소, 요소와 속성 간에 계층 관계가 존재하는 것입니다.   

위의 예시 그림은 아주 간단한 구조임에도 불구하고 웹 페이지에서 노란 박스로 표시되어 있는 p 요소를 웹 스크랩핑 하여 가져오고 싶다면 /html/body/div/div/p 라는 절대 경로로 가져와야 할 것입니다. 그리고 실제 아주 복잡하게 구현되어 있는 웹 페이지에서 내가 원하는 부분을 절대 경로로 가지고 온다는 것은 매우 긴 path를 요구하게 될 것입니다. 이러한 비효율성을 해결하기 위해 나온 개념이 바로 XPath로 **내가 원하는 요소 또는 속성을 찾기 위한 질의어** 입니다.  

-----

<p>&nbsp;</p>


# XPath 문법

특정 요소나 속성을 찾고 싶을 때 다음과 같은 문법을 사용하여 좀 더 편리하게 접근할 수 있습니다. 아래 문법 설명에서는 노란 박스의 p 요소를 찾는 것을 예시로 하겠습니다.  

- /   : 현재 위치의 자식 노드만 검색           예시) /html/div/div/p
- //  : 현재 위치의 모든 자손 노드에서 검색     예시) //p
- \*   : 경로에 있는 모든 노드를 반환           예시) /html/div/div/*
- [ ]  : 필터 표현식으로 인덱스, 속성 등을 통해 특정 요소를 검색
- [index] : 검색된 노드들 중 index에 해당하는 노드 반환, 1부터 시작   예시)//p[1]
- [@attr] : 검색된 노드들 중 해당 속성을 가지고 있는 모든 노드를 반환  예시)//p[@class]
- [@attr=”value”] : 검색된 노드들 중 해당 속성과 속성 값이 일치하는 노드를 모두 반환

-----

<p>&nbsp;</p>


# 실제 웹 페이지에서 XPath 찾는 방법

이제 본격적으로 실제 내가 웹 스크랩핑하고 싶은 웹 페이지에서 원하는 부분의 XPath를 찾는 방법에 대해 알아보도록 하겠습니다. 위의 내용을 이해하셨다면 사실 이 부분은 아래의 예제처럼 클릭 몇번만 하면 누구나 아주 쉽게 찾을 수 있습니다. 어쩌면 위의 내용과 무관하게 누구나 찾을 수 있을 정도로 쉽습니다.  

## 예시 - Google 검색 결과의 페이지 이름 찾기

![xpath find-1](https://drive.google.com/uc?export=view&id=1A9uUUryvZVr2bxL84jQs1E-xHqEc2667)
  
실제 구글에서 mr.devlife를 검색한 후 검색 결과인 ” Mr.DevLife Blog ” 라는 페이지 이름의 XPath를 찾아보도록 하겠습니다. 우선 다음 그림과 같이 mr.devlife라고 구글에서 검색을 해줍니다.  
  
![xpath find-2](https://drive.google.com/uc?export=view&id=121E23QWTTKkjwjIfrMtQ2CSwsM9U55GG)

검색 결과가 나왔으면 키보드의 F12 또는 Ctrl + Shift + I 를 눌러서 크롬의 개발자 도구를 띄워 줍니다. 그리고 개발자 도구의 왼쪽 상단 모서리 부분에 커서모양의 아이콘을 클릭해 줍니다.  
 
![xpath find-3](https://drive.google.com/uc?export=view&id=1DZtlUTC71a0caxPpP2qtHvppi8hkN31P)
  
이제 내가 찾고 싶은 부분인 ” Mr.DevLife Blog ” 라는 페이지 이름이 나와 있는 부분에 마우스 커서를 가져다 대면 다음과 같이 정보가 나오고 클릭을 해줍니다.  
  
![xpath find-4](https://drive.google.com/uc?export=view&id=1C9kxpdV-dmUIE2QdL8jVkcHexqB3fM9S)
  
그럼 오른쪽 개발자 도구에 페이지 이름의 HTML 코드 부분으로 바로 이동하게 되고 파란색으로 표시가 됩니다. 해당하는 HTML 코드에 마우스 커서를 가져가면 왼쪽 웹 페이지 부분에도 표시가 됩니다. 코드를 보니 검색된 페이지의 이름은 h3 태그로 이루어져 있었네요.  
  
![img](https://drive.google.com/uc?export=view&id=1KNfSduWX33m76HUJhbEXypyrO-kzwBsl)
  
마지막으로 해당 코드에 마우스 커서를 가져가서 오른쪽 클릭을 한 뒤 Copy에서 Drop Down 된 항목 중 Copy XPath를 선택하여 복사해주면 끝 입니다. 이제 복사된 결과를 붙여 넣기 해서 확인해 보면 다음과 같습니다.  
  
**//\*[@id=”rso”]/div[1]/div/div[1]/div/div/div/div[1]/a/h3**
  
이렇게 우리가 찾고자 했던 ” Mr.DevLife ” 라는 페이지 이름의 XPath를 찾아 보았습니다. 예시와 동일한 방법을 통해 웹 페이지에 있는 모든 요소의 XPath를 찾는 것이 가능합니다.  

-----

<p>&nbsp;</p>


# 마치며

여기까지 웹 스크래핑을 하기 위해 필수적으로 알아야하는 요소인 XPath에 대한 개념과 실제 웹 페이지에서 찾는 방법까지 알아보았습니다. 이제 다음 포스팅에서는 웹 스크랩핑을 위한 라이브러리인 Selenium을 이용하여 어떻게 웹 스크랩핑을 할 수 있는지에 대해 알아보도록 하겠습니다.  


참고 : [위키백과 – XPath](https://ko.wikipedia.org/wiki/XPath)